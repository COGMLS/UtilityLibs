# Logger Library

The Logger Library is designed to help developers to easily create log files and manage the log entries with an logger object that represent each log file. The library also contains methods to clean old log files and includes an non standard implementation of the `std::exception` similar to Microsoft's implementation in Visual C++ to cross-platform support.

The Logger Library offer two logger manager classes, `Logger` and `LoggerW` (support to `std::wstring`). Both logger classes supports a custom log entry class, `LogEntry` (to `Logger`) and `LogEntryW` (to `LoggerW`). To use the loggers to register the log entries, use `newEntry` method to register a new entry.

Each logger offers the feature *autosave*. The autosave feature is designed to save the entries in the system's memory before reach the maximum entries set. When the maximum value is reached or the logger object destructor is called, the entries are saved. This feature is focus to avoid the necessity to use the I/O all the time on big files or to reduce necessity to call all the time the `saveLog` method. The save log method can be used when *autosave* is enabled and can be disabled any time. **By default the *autosave* is disabled when the object is created.** To enable or disable the autosave, use the method `setAutoSave`.

The library contain a custom date and time implementation to register the log entry or the log file creation. The format used by `LoggerLocalDateTime` is ISO 8601 and a date and time registry to `LogEntry` or `LogEntryW` can be generated by `getLoggerDateTime` method. To get the log file creation from the logger manager object, use the `getLogDateTime`.

**The Logger Library can be included with the single file `LoggerLib.hpp`**

> **NOTE:** Logger Library does not provide a output formatted data or separate the log entry components at this moment. To make sure the components can be separated to be readable, use spaces or other marks to make it readable. The format output is *[title][message][data]*.

## How to implement a logger object:

```C++

#include "LoggerLib.hpp"

int main()
{
    // Creating the logger object
    // Using a base directory to store the file and the file base name
    Logger my_logger("/Logs", "my_logfile");    // Create the file: /Logs/my_logfile.log

    // Adding a new log entry:

    // Output: LogEntryTitle::LogMessage
    my_logger.newEntry("LogEntryTitle::", "LogMessage");

    // Output: LogEntryTitle::LogMessage - ExtraLogData
    my_logger.newEntry("LogEntryTitle::", "LogMessage", " - ExtraLogData");

    // Using manual log save:
    my_logger.saveLog();

    // Enable the autosave and set to store 10 entries:
    // When set to true, enable the feature
    // If maxLogEntries is set to zero, will use the LOGGER_LIB_MAX_AUTOSAVE_ENTRIES defined value
    my_logger.setAutoSave(true, 10)

    // When the destructor of my_logger is called, all existing log entries will be saved
    
    return 0;
}
```

## Languages Available:

* C++17 *(LoggerLibSolution)*
* C++20 *(LoggerLib)*
* C# ***(Not ready)***
* PowerShell ***Will use the C# library***
* Python 3 Module ***(Not ready)***

> **NOTE:** The LoggerLibSolution contains an exported logger library version from another project. The actual LoggerLib contains a generic version with improvements that can be better for some projects and with cross-platform support.

> **NOTE:** This project contain a **release** version of `LoggerLib` and `LoggerLibSolution` (only `std::string` supported), other project variations are in development or will be in the future.

## Additional Information:

Additional information about this project can be found in the file `LoggerLibInfo.md`, with recent, development and future implementations. It also contain information about **known bugs** and deprecated/removed features. For bugs, deprecated and removed features are available in tables where can also provide additional information about how it is possible mitigate or replace (the features) with a workaround.

The complete release notes and modified versions notes can be found in the `LoggerLibReleaseNotes.md` (originally called `LoggerLibHistory.md`) it contains more technical information of project changes.

The additional documentation files can be found in the local [Docs](./Docs) directory.

## Project Implementations:

### Recently Implementations:

- Sort log files by age.
- Experimental code control
- `LogDataStore` to easily store various datatype with better memory usage
- *(Only for development)* Version build release type to control experimental features
- Optimized `LogDataStore` to use less instructions to operate
- Fix correct time format in log file format on *nix systems *(Version 3.4.0)*

### Implementations under development:

- Support to formatting log data
- UTC time format
- High Precision date and time to all platforms

> **TO DISABLE EXPERIMENTAL FEATURES, COMMENT THE LINES IN `LoggerExperimental.hpp` or set the `LOGGER_LIB_COMPILE_BUILD_TYPE` in `LoggerLibVersion.hpp` to *alpha (1)*, *beta (2)*, *release candidate (3)* or *release (4)***

## Logger Library Release History:

<!-- Logger Library History Table: -->
<head>
    <link rel="stylesheet" href="./Docs/CSS/ReleaseNotes.css">
</head>
<dl>
    <!-- 3.4.0-release candidate (2025/04/08) -->
    <dt><version-data>3.4.0-release candidate</version-data> | Release Date: 2025/04/08</dt>
    <dd>Changed private method <code>cleanData</code> to <code>setDataStore</code> in <strong>LogDataStore</strong></dd>
    <dd>Optimized <code>LogDataStore</code> using less instructions to operate</dd>
    <dd>Added <code>LOG_DATA_FAIL</code> in <strong>LogDataType</strong> to determinate when <i>LogDataStore</i> fail to set the data correctly</dd>
    <dd>Added experimental log file name in UTC time on Linux and MacOS platforms</dd>
    <dd><code>LogDataStore</code> is now the new way to store data in Logger Library</dd>
    <!-- 3.3.1-release (2025/03/31) -->
    <dt><version-data>3.3.1-release</version-data> | Release Date: 2025/03/31</dt>
    <dd>Added support to UTC format</dd>
    <dd>Added new constructor in <code>LogDataStore</code> with support to automatically define time precision</dd>
    <dd><fix-alert>[FIX]</fix-alert> Local datetime on Linux and MacOS</dd>
    <dd><fix-alert>[FIX]</fix-alert> missing highPrecision check in Equality Operators in <code>Logger</code> and <code>LoggerW</code></dd>
    <!-- 3.3.0-release (2025/03/26) -->
    <dt><version-data>3.3.0-release</version-data> | Release Date: 2025/03/26</dt>
    <dd>Removed <code>sortLogFileList2</code></dd>
    <dd>Added experimental feature guards</dd>
    <dd><fix-alert>[FIX]</fix-alert> missing autosave feature when destructor is called.</dd>
    <dd><fix-alert>[FIX]</fix-alert> autosave writing log entries.</dd>
    <dd><fix-alert>[FIX]</fix-alert> missing autosave treatment when logEntries not reach max entries.</dd>
    <dd><fix-alert>[FIX]</fix-alert> missing treatment when maxLogEntries is zero.</dd>
    <dd><note-alert>NOTE:</note-alert> This release version does not implement the <code>LogDataStore</code> and does not provide a better memory management to store the data</dd>
    <dd><strong>The <i>alpha</i> version features will be moved to next version 3.x</strong></dd>
    <dd><strong>Some <i>beta</i> version features will be moved to next version 3.3.x or 3.4.x</strong></dd>
    <!-- 3.3.0-alpha.10 (2025/03/14) -->
    <dt><version-data>3.3.0-alpha.10</version-data> | Release Date: 2025/03/14</dt>
    <dd>Added getLogDtReg</dd>
    <dd>Added missing treatment to export <code>LogDataStore</code> information</dd>
    <dd>Updated <code>operator<<</code></dd>
    <dd>Added documentation about experimental preprocessor definition guards</dd>
    <dd>Removed experimental <code>LogDataStore</code> equality operator</dd>
    <!-- 3.3.0-alpha.9 (2025/02/18) -->
    <dt><version-data>3.3.0-alpha.9</version-data> | Release Date: 2025/02/18</dt>
    <dd><note-alert>[NOTE]</note-alert> THE PREVIOUS ALPHA VERSIONS WAS NOT DOCUMENTED.</dd>
    <dd><warning-alert>[IMPORTANT]</warning-alert> <b>THIS VERSION CONTAINS SEVERAL MODIFICATIONS INSIDE THE MAIN COMPONENTS</b></dd>
    <dd>Added new experimental definition flags.</dd>
    <dd>Moved <code>dtReg</code> in <code>LogEntry</code> and <code>LogEntryW</code> to itâ€™s own experimental code portion. Now it's possible to control this experimental feature independently</dd>
    <dd>Added full support to <code>LogDataStore</code> in a experimental code part. Allowing use less memory and various datatype without need convert it's values to string.</dd>
    <dd><note-alert>[NOTE]</note-alert> The data exportation from <code>LogDataStore</code> was not fully tested</dd>
    <dd>Added partial support to <code>dtReg</code> in a experimental code part. Now each log entry contains it's own date and time registry. Coping the objects will copy the registry.</dd>
    <dd>Added equality operators to <code>LogDataStore</code></dd>
    <dd><note-alert>[NOTE]</note-alert> <code>LogDataStore</code> received experimental <i>friend</i> equality operators during tests to mitigate a compiler warning. These operators are disabled by default</dd>
    <dd><fix-alert>[FIX]</fix-alert> coping data on MoveConstructor.</dd>
    <dd><fix-alert>[FIX]</fix-alert> missing <code>seconds</code> equality verification from <code>LoggerLocalDateTime</code> union in <code>LogEntry</code> and <code>LogEntryW</code> in equality operations, when LOGGER_ENABLE_EXPERIMENTAL_DATA_STORE is <b>disabled</b></dd>
    <dd><fix-alert>[FIX]</fix-alert> The standard algorithm to make the equality test between the both <code>logEntries</code> of <b>Logger</b> and <b>LoggerW</b> classes fails when <code>LogDataStore</code> is enabled</dd>
    <dd><fix-alert>[FIX]</fix-alert> Making equality of <code>LogEntry</code> or <code>LogEntryW</code> show the warning message: <i>C++20 says that these are ambiguous, even though the second is reversed</i> on GCC from equality operators</dd>
    <!-- 3.3.0-alpha.5 (2025/02/17) -->
    <dt><version-data>3.3.0-alpha.5</version-data> | Release Date: 2025/02/17</dt>
    <dd>Added experimental code control guards to enable/disable experimental features</dd>
    <dd>Added <code>highPrecision</code> flag in <code>LoggerLocalDateTime</code>.</dd>
    <dd>Added <code>useHighPrecision</code> parameter in <code>getLoggerDateTime</code> function.</dd>
    <dd>Removed warning message on documentation.</dd>
    <dd>Moved preprocessor definition to control the experimental sorting algorithm to LoggerExperimental.hpp</dd>
    <dd>Added experimental <code>LogDataStore</code> class.</dd>
    <dd>Moved and enhanced the LogDataType enum to LogDataStore.hpp</dd>
    <dd>Moved and modified the LogEntryData union to LogDataStore.hpp</dd>
    <dd><warning-alert>[WARNING]</warning-alert> The <code>LogDataStore</code> is under development and may contain bugs.</dd>
    <dd>Added support to experimental <code>LogDataStore</code> in <code>LogEntry</code> and <code>LogEntryW</code>.</dd>
    <dd>Added to <code>LogEntry</code> and <code>LogEntryW</code> <code>getTitle</code>, <code>getMessage</code>, <code>getType</code>, <code>getData</code> methods.</dd>
    <dd>Added to <code>LogEntry</code> and <code>LogEntryW</code> <code>getStrData</code> method for non-experimental code.</dd>
    <dd><note-alert>[NOTE]</note-alert> Using experimental <code>LogDataStore</code> compatible code, will make some methods not work as expected at this moment</dd>
    <dd>Added experimental <code>LogFormat</code> class</dd>
    <dd>Added experimental <code>LogFormatToken</code> class</dd>
    <dd><note-alert>[NOTE]</note-alert> The LogFormatToken and LogFormat classes are not ready for use yet</dd>
    <!-- 3.3.0-alpha.2 (2025/02/08) -->
    <dt><version-data>3.3.0-alpha.2</version-data> | Release Date: 2025/02/08</dt>
    <dd>Modified the <code>LoggerException</code> to include custom error messages.</dd>
    <dd><note-alert>[NOTE]</note-alert> <code>LoggerException</code> is an experimental feature and it is not been used by the library yet.</dd>
    <dd><fix-alert>[FIX]</fix-alert> Added definition of inline methods <code>getLibVersion</code> and <code>getVersionStr</code> to resolve Visual Studio link fail.</dd>
    <!-- 3.3.0-alpha.1 (2025/01/27) -->
    <dt><version-data>3.3.0-alpha.1</version-data> | Release Date: 2025/01/27</dt>
    <dd><code>sortLogFileList2</code> marked as deprecated</dd>
    <dd><fix-alert>[FIX]</fix-alert> Added missing stream output for date and time information in <code>LogEntry</code> and <code>LogEntryW</code> classes</dd>
</dl>

*Older versions was not tracked*

## License

MIT License

Copyright (c) 2022-2025 Matheus L. Silvati

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.